{% extends "admin/base_admin.html" %}

{% block page_title %}Dashboard{% endblock %}

{% block extra_style %}
.kpi-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
gap: 24px;
margin-bottom: 32px;
}

.kpi-card {
background: white;
border-radius: 12px;
padding: 24px;
box-shadow: 0 1px 3px rgba(0,0,0,0.1);
display: flex;
align-items: center;
gap: 16px;
}

.kpi-icon {
width: 60px;
height: 60px;
border-radius: 12px;
display: flex;
align-items: center;
justify-content: center;
font-size: 1.75rem;
}

.kpi-content h3 {
font-size: 0.875rem;
color: var(--gray-600);
font-weight: 600;
text-transform: uppercase;
letter-spacing: 0.05em;
margin-bottom: 8px;
}

.kpi-content p {
font-size: 2rem;
font-weight: 800;
color: var(--gray-900);
margin: 0;
}

.section-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 24px;
}

.section-card {
background: white;
border-radius: 12px;
padding: 24px;
box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}

.section-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
padding-bottom: 16px;
border-bottom: 2px solid var(--gray-100);
}

.section-title {
font-size: 1.125rem;
font-weight: 700;
color: var(--gray-900);
}

.activity-item {
padding: 12px 0;
border-bottom: 1px solid var(--gray-100);
display: flex;
justify-content: space-between;
align-items: center;
}

.activity-item:last-child {
border-bottom: none;
}
{% endblock %}

{% block content %}
<div class="kpi-grid">
    <div class="kpi-card">
        <div class="kpi-icon" style="background: #dbeafe; color: #1e40af;">
            <i class="fas fa-users"></i>
        </div>
        <div class="kpi-content">
            <h3>Total Users</h3>
            <p>{{ kpi_data.total_users }}</p>
        </div>
    </div>

    <div class="kpi-card">
        <div class="kpi-icon" style="background: #d1fae5; color: #065f46;">
            <i class="fas fa-building"></i>
        </div>
        <div class="kpi-content">
            <h3>Active Turfs</h3>
            <p>{{ kpi_data.total_turfs }}</p>
        </div>
    </div>

    <div class="kpi-card" style="cursor: pointer;"
        onclick="window.location.href='{% url 'admin:pending_approvals_list' %}'">
        <div class="kpi-icon" style="background: #fef3c7; color: #92400e;">
            <i class="fas fa-clock"></i>
        </div>
        <div class="kpi-content">
            <h3>Pending Approvals</h3>
            <p>{{ kpi_data.pending_approvals }}</p>
        </div>
    </div>

    <div class="kpi-card">
        <div class="kpi-icon" style="background: #fee2e2; color: #991b1b;">
            <i class="fas fa-calendar-check"></i>
        </div>
        <div class="kpi-content">
            <h3>Today's Bookings</h3>
            <p>{{ kpi_data.today_bookings }}</p>
        </div>
    </div>

    <div class="kpi-card">
        <div class="kpi-icon" style="background: #e0e7ff; color: #4338ca;">
            <i class="fas fa-rupee-sign"></i>
        </div>
        <div class="kpi-content">
            <h3>Total Revenue</h3>
            <p>₹{{ kpi_data.total_revenue }}</p>
        </div>
    </div>
</div>

<div class="section-grid">
    <div class="section-card">
        <div class="section-header">
            <h2 class="section-title">Recent Turfs</h2>
            <a href="{% url 'admin:venue_directory' %}"
                style="color: var(--primary); text-decoration: none; font-weight: 600; font-size: 0.875rem;">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        {% for turf in recent_turfs %}
        <div class="activity-item">
            <div>
                <div style="font-weight: 600; color: var(--gray-900);">{{ turf.name }}</div>
                <div style="font-size: 0.875rem; color: var(--gray-600); margin-top: 4px;">
                    {{ turf.city }} • {{ turf.created_at|date:"M d, Y" }}
                </div>
            </div>
            <span class="badge {% if turf.is_active %}badge-success{% else %}badge-warning{% endif %}">
                {% if turf.is_active %}Active{% else %}Pending{% endif %}
            </span>
        </div>
        {% empty %}
        <p style="text-align: center; color: var(--gray-500); padding: 20px;">No recent turfs</p>
        {% endfor %}
    </div>

    <div class="section-card">
        <div class="section-header">
            <h2 class="section-title">Recent Bookings</h2>
            <a href="{% url 'admin:bookings_booking_changelist' %}"
                style="color: var(--primary); text-decoration: none; font-weight: 600; font-size: 0.875rem;">
                View All <i class="fas fa-arrow-right"></i>
            </a>
        </div>

        {% for booking in recent_bookings %}
        <div class="activity-item">
            <div>
                <div style="font-weight: 600; color: var(--gray-900);">{{ booking.turf.name }}</div>
                <div style="font-size: 0.875rem; color: var(--gray-600); margin-top: 4px;">
                    {{ booking.booking_date }} • {{ booking.time_slot }}
                </div>
            </div>
            <div style="text-align: right;">
                <div style="font-weight: 700; color: var(--success);">₹{{ booking.total_price }}</div>
            </div>
        </div>
        {% empty %}
        <p style="text-align: center; color: var(--gray-500); padding: 20px;">No recent bookings</p>
        {% endfor %}
    </div>
</div>
{% endblock %}